@model Web.Application.ViewModels.Admin.Page.PageParentModel

@{

	ViewData["Title"] = "Consultation";
	ViewData["Brandname"] = @Html.Raw(Model?.PageModel?.Contents?.Where(c => c.Tag == "Home_logoName").Select(c => c.Content).FirstOrDefault());
}


<div class="row mx-5 mt-2">
	<div class="col-lg-12 col-md-12 col-sm-12">
		<ol class="breadcrumb">
			<li class="breadcrumb-item list-unstyled "><a class="text-decoration-none" style="color:black" asp-controller="Home" asp-action="index">Home</a></li>
			<li class="breadcrumb-item active"><a class="text-decoration-none" style="color:black" href="javascript:void(0)">Consultation</a></li>
		</ol>
	</div>
</div>
<div class="Container-fluid">
		<div class="row">
			<div class="col-lg-12 col-md-12 col-sm-12 col-12">
				<h1 class="text-center fw-bold " style="color:black">Contact Us</h1>
				<p class="text-center mt-3 fs-4" style="color:black">Your trust is our commitment; privacy and confidentiality assured.</p>
			</div>
		</div>
		<div class="row p-5 d-flex justify-content-center align-items-start mt-5">
			<div class="col-lg-6 col-md-12 col-sm-12 col-12">
				<form method="post" asp-action="SendEmail" asp-controller="Consultation">
					<div class="row">
						<div class="form-group mt-3 col-lg-6 col-md-12 col-sm-12">
							@* <div class="input-wrapper">
							<label style="color:black" class="form-label fw-bold required">Choose a Category</label>
								<select id="DropDownCategory" class="form-control p-2" name="category" value="category" asp-for="ConsultationToModel!.ServiceId">
									@if (ViewBag.Services != null)
									{
										string selectedService = ViewBag.SelectedService?.ToLower().Replace(" ", "") ?? string.Empty;

										foreach (var item in ViewBag.Services)
										{

											string itemText = item.Text?.ToLower().Replace(" ", "") ?? string.Empty;

											if (itemText == selectedService)
											{

											<option value="@item.Value" selected>@item.Text</option>
											}
											else
											{
												<option value="@item.Value">@item.Text</option>
											}
										}
									}
									else
									{

										<option disabled>No services available</option>
									}
								</select>
							</div> *@

							<div class="input-wrapper">
    <label style="color:black" class="form-label fw-bold required">Choose a Category</label>
    <select id="DropDownCategory" class="form-control p-2" name="category" asp-for="ConsultationToModel!.ServiceId">
        <option value="" selected)>---Select a Category---</option> 
        @if (ViewBag.Services != null)
        {
         
									string selectedService = ViewBag.SelectedService?.ToLower().Replace(" ", "") ?? string.Empty;

            foreach (var item in ViewBag.Services)
            {
										string itemText = item.Text?.ToLower().Replace(" ", "") ?? string.Empty;

										if (itemText == selectedService)
										{

											<option value="@item.Value" selected>@item.Text</option>
										}
										else
										{
											<option value="@item.Value">@item.Text</option>
										}
            }
        }
        else
        {
            <option disabled>No services available</option>
        }
    </select>
</div>
							<span asp-validation-for="ConsultationToModel!.ServiceId" style="color:red"></span>
						</div>
					<div id="feesBox" class="mt-3" style="display:none;  padding: 5px 5px ; background-color: rgb(241, 226, 174);">
							<div class="p-2 d-flex justify-content-center align-items-center flex-column">
							<p id="feesAmount" class="m-0 fw-bold text-dark"></p>
							</div>
						</div>
						<div class="form-group mt-3 col-lg-6 col-md-12 col-sm-12">
							<div class="input-wrapper">
								<label style="color:black" class="form-label fw-bold required">Name</label>
								<input type="text" asp-for="ConsultationToModel!.Name" class="form-control corner-radius p-2" placeholder="Enter Name" id="name">
							</div>
							<span asp-validation-for="ConsultationToModel!.Name" style="color:red"></span>
						</div>
					</div>
					<div class="row">
						<div class="form-group mt-3 col-lg-6 col-md-6 col-sm-6">
							<div class="input-wrapper">
							<label style="color:black" class="form-label fw-bold required">Email</label>
								<input type="text" asp-for="ConsultationToModel!.Email" class="form-control rounded-4 p-2 astrisk" placeholder="name@example.com">

							</div>
							<span asp-validation-for="ConsultationToModel!.Email" style="color:red"></span>
						</div>
						<div class="form-group mt-3 col-lg-6 col-md-6 col-sm-6">
							<div class="input-wrapper">
							<label style="color:black" class="form-label fw-bold required">Phone</label>
								<input type="text" asp-for="ConsultationToModel!.Phone" class="form-control rounded-4 p-2 astrisk" placeholder="Enter Your Phone">

							</div>
							<span asp-validation-for="ConsultationToModel!.Phone" style="color:red"></span>
						</div>
					</div>
					<div class="row">
						<div class="form-group mt-3 col-lg-4 col-md-4 col-sm-12">
						<label style="color:black" class="form-label fw-bold required">Date of Birth</label>
							<input style="cursor:pointer" type="date" asp-for="ConsultationToModel!.DateOfBirth" class="form-control rounded-4 p-2" placeholder="Enter Your Date Of Birth">
							<span asp-validation-for="ConsultationToModel!.DateOfBirth" style="color:red"></span>
						</div>
						<div class="form-group mt-3 col-lg-3 col-md-4 col-sm-12">
						<label style="color:black" class="form-label fw-bold required">Time Of Birth</label>
							<input style="cursor:pointer" type="time" asp-for="ConsultationToModel!.TimeOfBirth" class="form-control rounded-4 p-2" placeholder="Enter Your Time Of Birth">
							<span asp-validation-for="ConsultationToModel!.TimeOfBirth" style="color:red"></span>
						</div>
						<div class="form-group mt-3 col-lg-5 col-md-4 col-sm-12">
							<div class="input-wrapper">
							<label style="color:black" class="form-label fw-bold required">Place Of Birth</label>
								<input type="text" asp-for="ConsultationToModel!.PlaceOfBirth" class="form-control rounded-4 p-2" placeholder="Enter Your Place Of Birth">

							</div>
							<span asp-validation-for="ConsultationToModel!.PlaceOfBirth" style="color:red"></span>
						</div>
					</div>
					<div class="form-group mt-3 col-lg-12 col-md-12 col-sm-12">
						<label style="color:black" class="form-label fw-bold">Any Information</label>
						<textarea class="form-control rounded-4 p-3 astrisk" asp-for="ConsultationToModel!.AnyInformation" rows="4" placeholder="Enter Your Any Information"></textarea>
					</div>

					<div class="mt-3 form-group col-lg-12 col-md-12 col-sm-12 col-12 d-flex flex-wrap mb-5 justify-content-start align-items-center">
						<div class="g-recaptcha" data-sitekey="6LcsEzEqAAAAAFdp_5NtiPd07-Hy6aiqjiDNHQ-n" data-callback="onCaptchaSuccess"></div>
						<input type="hidden" id="CaptchaResponse" name="CaptchaResponse" />
						<div>
							<button type="submit" class="btn btn-outline-danger ms-3 fw-bold fs-5 mt-2" style="background-color: darkred; color: white;">Send Message</button>
						</div>
					</div>
				</form>
			</div>
			<div class="col-lg-6 col-md-12 col-sm-12 mb-5">
				<div class="rounded consult-bg  p-2 mb-3 text-white">
					<p class="p-1 text-light">@Html.Raw(Model!.PageModel?.Contents?.Where(c => c.Tag == "Contact").Select(c => c.Content).FirstOrDefault())</h1></p>
				</div>
			</div>
		</div>
</div>
@section Scripts {
	@{
		await Html.RenderPartialAsync("_ValidationScriptsPartial");

	}

	<script>
	
		$(document).ready(function () {
			$('#DropDownCategory').change(function (e) {
				var selectedCategory = this.value;
				if (selectedCategory == "2") {
					// Show the fees box
					document.getElementById('feesBox').style.display = 'block';
					$.ajax({
						type: "GET",
						url: "@Url.Action("GetServiceConsultationFee", "Service", new { area = "Admin" })",
						async: false,
						success: function (fee) {
							document.getElementById('feesAmount').innerHTML = `Consultation Fee: ${fee.amount}`;
						},
						error: function (req, status, error) {
							console.log(error);
						}
					});
				}
				else {
					// Show the fees box
					document.getElementById('feesBox').style.display = 'none';
				}
			});
			$('#DropDownCategory').trigger("change");
		});
	</script>
}